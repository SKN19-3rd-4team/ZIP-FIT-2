# 개발 방향 최종 결정

> **실제 API 구조 파악 완료 - 개발 방향 결정**

---

## ✅ 현재 상황 정리

### 완료된 사항
1. ✅ API 문서 접속: `http://127.0.0.1:8000/api/docs` 정상 작동
2. ✅ Docker + PostgreSQL 연결 완료
3. ✅ 마이그레이션 완료
4. ✅ `drf-spectacular` 설치 완료 → requirements.txt 업데이트 완료
5. ✅ 실제 데이터: 크롤링 데이터 4-5개 PostgreSQL에 저장됨
6. ✅ API 구조 파악 완료

### 확인된 API 엔드포인트
- `POST /api/chat` - 채팅 메시지 전송 및 AI 응답
- `GET /api/chathistories?user_key={user_key}` - 채팅 히스토리 목록
- `GET /api/chathistories/{session_key}?user_key={user_key}` - 특정 히스토리 상세
- `GET /api/anncs` - 공고 목록 조회
- `GET /api/annc_summary` - 공고 요약 정보

---

## 🎯 개발 방향 결정

### **권장 방향: 실제 API 테스트 후 개발**

**이유**:
1. **API 문서와 실제 응답이 다를 수 있음**
   - 문서는 스키마만 정의
   - 실제 응답 형식 확인 필요

2. **한 번에 올바르게 구현**
   - 나중에 수정하는 것보다 초기에 확인하는 것이 효율적
   - 불필요한 반복 작업 방지

3. **실제 데이터로 테스트 가능**
   - PostgreSQL에 실제 공고 데이터 4-5개 있음
   - 실제 응답 형식 확인 가능

---

## 📋 다음 단계 (우선순위)

### 1단계: 실제 API 테스트 및 응답 형식 확인 (최우선) ⚠️

**목적**: 실제 API 응답 형식을 확인하여 개발 가이드 작성

**작업 내용**:
1. `/api/docs`에서 "Try it out" 기능 사용
2. 각 API 엔드포인트 호출 테스트
3. 실제 응답 형식 확인 및 문서화

**테스트할 API**:
- [ ] `GET /api/annc_summary` - 가장 간단한 API부터
- [ ] `GET /api/anncs?annc_status=전체&annc_type=전체&items_per_page=10&current_page=1`
- [ ] `GET /api/chathistories?user_key=테스트키` (더미 데이터일 수 있음)
- [ ] `POST /api/chat` (가능하다면)

**결과 문서화**:
- 실제 응답 예시 저장
- 프론트엔드 개발 가이드 작성

---

### 2단계: 프론트엔드 개발 (API 테스트 후)

**작업 순서**:
1. **main.html** - 공고 요약 정보 표시
   - `/api/annc_summary` 호출
   - 통계 숫자 업데이트

2. **list.html** - 공고 목록 표시
   - `/api/anncs` 호출
   - 페이지네이션 처리

3. **chat.html** - 채팅 기능
   - `/api/chat` 호출
   - `/api/chathistories` 호출

4. **main.html** - 채팅 히스토리 목록
   - `/api/chathistories` 호출

---

## 💡 제안: 단계별 개발 접근

### 옵션 A: 점진적 개발 (권장)

**장점**:
- 각 단계마다 테스트 가능
- 문제 발생 시 빠른 수정 가능
- 실제 데이터로 검증 가능

**단계**:
1. **main.html** → `/api/annc_summary` 연동 (가장 간단)
2. **list.html** → `/api/anncs` 연동
3. **chat.html** → `/api/chat` 연동
4. **main.html** → `/api/chathistories` 연동

### 옵션 B: 전체 개발 후 테스트

**단점**:
- 문제 발생 시 수정 범위 큼
- 실제 응답과 다를 수 있음

---

## 🔍 확인 필요 사항

### 1. user_key 생성 방식

**현재 상태**:
- API 문서에 user_key 생성 API 없음
- 프론트엔드에서 생성하는 방식으로 구현됨

**확인 방법**:
- `/api/docs`에서 user_key 관련 엔드포인트 확인
- 없다면 현재 방식 유지

### 2. session_key 생성 방식

**현재 상태**:
- API 문서에 session_key 생성 API 없음
- 프론트엔드에서 UUID 생성하는 방식으로 구현됨

**확인 방법**:
- `/api/docs`에서 session_key 관련 엔드포인트 확인
- 없다면 현재 방식 유지

### 3. 실제 API 응답 형식

**중요**: API 문서의 스키마와 실제 응답이 다를 수 있음

**확인 방법**:
- `/api/docs`에서 "Try it out" 기능 사용
- 실제 API 호출하여 응답 형식 확인

---

## 📝 작업 체크리스트

### 즉시 작업 (최우선)
- [ ] `/api/docs`에서 실제 API 호출 테스트
  - [ ] `/api/annc_summary` 호출 → 응답 형식 확인
  - [ ] `/api/anncs` 호출 → 응답 형식 확인
  - [ ] `/api/chathistories` 호출 → 응답 형식 확인
  - [ ] `/api/chat` 호출 → 응답 형식 확인 (가능하다면)
- [ ] 실제 응답 형식 문서화
- [ ] 프론트엔드 개발 가이드 작성

### 개발 작업 (API 테스트 후)
- [ ] `main.html` - `/api/annc_summary` 연동
- [ ] `list.html` - `/api/anncs` 연동
- [ ] `chat.html` - `/api/chat` 연동
- [ ] `main.html` - `/api/chathistories` 연동

---

## 🎯 최종 권장사항

**"실제 API를 테스트하여 응답 형식을 확인한 후 개발하는 것이 가장 효율적입니다."**

**이유**:
1. API 문서와 실제 응답이 다를 수 있음
2. 한 번에 올바르게 구현하는 것이 효율적
3. 실제 데이터로 검증 가능

**다음 단계**:
1. `/api/docs`에서 실제 API 호출 테스트
2. 응답 형식 확인 및 문서화
3. 그에 맞춰 프론트엔드 개발 진행

---

**작성일**: 2025-01-20  
**상태**: 개발 방향 결정 완료, 실제 API 테스트 필요 ⚠️

