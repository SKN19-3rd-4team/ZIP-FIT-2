# 두 서버 동시 실행 가이드

## 포트 분리 설정

두 서버를 동시에 실행하려면 **포트를 분리**해야 합니다.

### 권장 설정

- **`figma_django`**: 8000 포트 (프론트엔드 개발용)
- **`zf_django`**: 8001 포트 (백엔드 API용)

### 실행 방법

#### 터미널 1: figma_django 서버
```bash
cd figma_django
python manage.py runserver 8000
```

#### 터미널 2: zf_django 서버
```bash
cd zf_django
python manage.py runserver 8001
```

## DB 연결 확인

두 서버는 **같은 PostgreSQL DB**를 사용합니다:
- `figma_django`는 `zf_django.chatbot.models.AnncAll`을 직접 import하여 사용
- 따라서 `zf_django` 서버가 실행되지 않아도 모델은 import 가능
- 하지만 최신 데이터를 확인하려면 `zf_django` 서버도 실행하는 것이 좋음

## 공고 리스트가 DB에서 불러와지지 않는 경우

### 확인 사항

1. **USE_REAL_DB 상태 확인**
   - `figma_django/chatbot/views.py`에서 `USE_REAL_DB`가 `True`인지 확인
   - 서버 터미널에 `[DEBUG] annc_list: USE_REAL_DB=True` 메시지가 보여야 함

2. **DB 연결 확인**
   - PostgreSQL이 실행 중인지 확인
   - `figma_django/config/settings.py`의 DB 설정 확인

3. **모델 import 확인**
   - `zf_django.chatbot.models.AnncAll`이 제대로 import되는지 확인
   - 서버 터미널에 `[DEBUG] annc_list: AnncAll=<class 'zf_django.chatbot.models.AnncAll'>` 메시지가 보여야 함

4. **DB 데이터 확인**
   - PostgreSQL에 실제로 공고 데이터가 있는지 확인
   - 서버 터미널에 `[DEBUG] annc_list: total_count=X` 메시지 확인

### 디버깅 로그 확인

서버 터미널에서 다음 로그를 확인하세요:

```
[DEBUG] annc_list: USE_REAL_DB=True, AnncAll=<class 'zf_django.chatbot.models.AnncAll'>
[DEBUG] annc_list: total_count=1234
[DEBUG] annc_list: items_data count=10
```

만약 다음과 같은 메시지가 보이면:
```
[DEBUG] annc_list: Using dummy data (USE_REAL_DB=False, AnncAll=None)
```

이것은 모델을 import하지 못했다는 의미입니다.

### 해결 방법

1. **Python 경로 확인**
   - `zf_django`가 Python 경로에 있는지 확인
   - 또는 `PYTHONPATH` 환경 변수에 `C:\SKN_19\ZIP-FIT-2` 추가

2. **서버 재시작**
   - `figma_django` 서버를 재시작하여 모델 import 재시도

3. **직접 확인**
   - Python 셸에서 직접 import 테스트:
   ```python
   from zf_django.chatbot.models import AnncAll
   print(AnncAll.objects.count())
   ```

## main 페이지 통계 문제

`main` 페이지의 통계 숫자가 제대로 표시되지 않는 경우:

1. **`annc_summary` API 확인**
   - 서버 터미널에서 `[DEBUG] annc_summary` 로그 확인
   - `total_count`와 `new_this_week` 값 확인

2. **프론트엔드 확인**
   - 브라우저 콘솔에서 API 응답 확인
   - `USE_MOCK_DATA = false`인지 확인

3. **데이터 확인**
   - 실제 DB에 데이터가 있는지 확인
   - `created_dttm` 필드가 올바르게 설정되어 있는지 확인

