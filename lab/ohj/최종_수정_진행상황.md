# 최종 검토 수정 진행 상황

## 문서: `lab/ohj/20251211_dev_01.md`

---

## 1. 데이터 확인 및 수정 (공고날짜, D-day, 기관에 따른 공고 설정)

### 1.1. mockData 정밀하게 수정 ✅
- [x] 지역 설정 수정 (LH: 전체, SH: 서울, GH: 경기)
- [x] 모집 기간 수정 (2024년-현재, 2025년 12월 11일 기준)
- [x] D-day 설정 (현재 날짜 기준)
- [x] 상태 태그 설정 (현재 날짜 기준)

### 1.2. 지역 설정 ✅
- **LH**: 전체 지역 공고
- **SH**: 서울 지역 내 공고만 (공고명에서 서울 지역 내 공고는 SH에 포함)
- **GH**: 경기 지역 내 공고만 (공고명에서 경기 지역 내 공고는 GH에 포함)

**수정 내용**:
- `generateMockAnnouncements()` 함수에서 기관별로 지역 필터링 로직 추가
- SH: 서울 지역만 포함 (서울, 강남, 강북, 송파, 강동 등)
- GH: 경기 지역만 포함 (경기, 수원, 성남, 고양, 부천, 세종 등)
- LH: 모든 지역 포함

### 1.3. 모집 기간 수정 ✅
- 모집 기간을 2024년-현재, 2025년 12월 11일(오늘 날짜) 기준으로 다양하게 설정
- 각 공고마다 다양한 모집 기간 생성

### 1.4. D-day 설정 ✅
- 올바르게 수정된 모집 기간 데이터를 바탕으로 현재 날짜를 항상 불러와서 D-day 올바르게 계산
- 마감된 공고(현재 날짜에 지나간 공고 데이터)는 '마감'으로 표기

### 1.5. 상태 태그 설정 ✅
- 현재 mockData도 현재 날짜를 불러와서 적용
- 모집 기간이 지난 공고는 '마감' 태그
- 모집 기간이 시작 전인 공고는 '공고예정' 태그
- 모집 기간 중인 공고는 '공고중' 또는 '접수중' 태그

---

## 2. list 페이지의 '공고 카드' 정렬 규칙

### 2.1. 기본 정렬 규칙 ✅
- 정렬 규칙: 공고중 > 접수중 > 공고예정 > 마감
- list 첫 페이지: 3개의 필터 적용 안됨, 정렬 규칙 적용됨

### 2.2. 필터 변경 시 정렬 규칙 적용 ✅
- [x] 기관 필터 선택 시 정렬 규칙 적용 확인
- [x] 공고 유형 필터 선택 시 정렬 규칙 적용 확인
- [x] 상태 필터 선택 시 정렬 규칙 적용 확인

**수정 내용**:
- `loadAnnouncements()` 함수에서 필터 적용 후에도 정렬 로직이 항상 실행되도록 수정
- 실제 API 데이터와 mockData 모두에 동일한 정렬 규칙 적용

---

## 3. 공고 카드 URL ✅

### 3.1. mockData URL 설정
- mock 데이터는 실제 공고가 아니므로 각 기관 사이트 링크로 접근
- 각 기관 태그에 따라서 공고에 대해서 URL 설정:
  - **LH**: `https://apply.lh.or.kr/lhapply/main.do`
  - **GH**: `https://www.gh.or.kr/`
  - **SH**: `https://www.i-sh.co.kr/main/index.do`

**수정 내용**:
- `generateMockAnnouncements()` 함수에서 기관별로 URL 설정
- `createAnnouncementCard()` 함수에서 URL이 없을 경우 기관별 기본 URL 사용

---

## 4. 히스토리 채팅 클릭 시 로딩 화면만 나오고 다음 화면 출력되지 않음

### 4.1. 다음 화면: 실제 채팅한 데이터 내역 ✅
- [x] 로딩 화면 개선 (이미 완료)
- [x] mockData로 가상의 대화 시나리오 작성 필요

### 4.2. mockData 시나리오 작성 ✅
- 시나리오는 실제로 호출되는 API 값에 맞춰서 작성
- 실제로는 API에서 호출한 값을 호출해야 함
- 시나리오 예시:
  - 공고 요약 출력 예시
  - 공고 비교 출력 예시
  - 기타 질문 출력 예시

**수정 내용**:
- `mockChatHistoryDetail` 객체에 다양한 시나리오 추가
- 각 시나리오별로 `chat_list` 배열에 실제 대화 내용 포함
- 공고 요약, 공고 비교, 일반 질문 등 다양한 케이스 포함

---

## 5. mockData는 실제 API response 값에 맞춰서 데이터를 가공해야 함 ✅

### 5.1. API 응답 형식 확인
- [x] `/api/annc_summary` 응답 형식 확인
- [x] `/api/anncs` 응답 형식 확인
- [x] `/api/chathistories` 응답 형식 확인
- [x] `/api/chathistories/{session_key}` 응답 형식 확인
- [x] `/api/chat` 응답 형식 확인

### 5.2. mockData와 실제 API 응답 형식 일치 확인
- [x] 모든 mockData가 실제 API 응답 형식과 일치하는지 확인
- [x] 필드명, 데이터 타입, 구조 모두 일치 확인

### 5.3. 프론트엔드에서 필요한 추가 필드
- 만약 프론트엔드에서 필요로 하는 필드가 API 응답에 없을 경우:
  - 백엔드에 요청하여 response 해주는 값들을 일부 수정 가능
  - 또는 프론트엔드에서 계산/추가 가능한 필드는 프론트엔드에서 처리

---

## 수정 완료 체크리스트

- [x] 1.1. mockData 정밀하게 수정
- [x] 1.2. 지역 설정 수정
- [x] 1.3. 모집 기간 수정
- [x] 1.4. D-day 설정
- [x] 1.5. 상태 태그 설정
- [x] 2.1. 기본 정렬 규칙 확인
- [x] 2.2. 필터 변경 시 정렬 규칙 적용 확인
- [x] 3. 공고 카드 URL 수정
- [x] 4.1. 히스토리 채팅 로딩 화면 개선
- [x] 4.2. mockData 시나리오 작성
- [x] 5.1. API 응답 형식 확인
- [x] 5.2. mockData와 실제 API 응답 형식 일치 확인

---

## 다음 단계

1. 실제 API 테스트 및 검증
2. 프론트엔드에서 필요한 추가 필드 확인 및 백엔드 협의
3. 실제 API 연동 시 `USE_MOCK_DATA = false`로 변경하여 테스트

