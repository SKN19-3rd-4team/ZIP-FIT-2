# 크롤러 접수 시작일 확인 결과

## 1. 크롤러 코드 분석

### 현재 크롤러가 추출하는 필드들

`zf_crawler/src/crawler/lh.py` 파일을 확인한 결과:

```python
all_data.append({
    'annc_title': this_title,
    'annc_url': detail_url,
    'annc_type': annc_type_simple,
    'annc_dtl_type': cols[1],  # 공고 유형 상세
    'annc_region': cols[3],     # 지역
    'annc_pblsh_dt': post_date_str,  # 게시일 (post_date_str)
    'annc_deadline_dt': cols[6],     # 마감일
    'annc_status': status,           # 공고 상태
    # ... 기타 필드
})
```

### 확인된 사항

1. **annc_pblsh_dt**: `post_date_str`로 설정됨 → **게시일**
2. **annc_deadline_dt**: `cols[6]`로 설정됨 → **마감일 (접수 종료일)**
3. **접수 시작일**: 크롤러에서 추출하지 않음 ❌

### 크롤러가 사용하는 데이터 소스

- **목록 페이지**: POST 요청으로 공고 목록 가져옴
- **추출 필드**: 목록 페이지의 테이블 컬럼에서 추출
  - `cols[1]`: 공고 유형 상세
  - `cols[3]`: 지역
  - `cols[6]`: 마감일
  - `post_date_str`: 게시일 (별도 파싱)

## 2. 접수 시작일 추출 가능 여부

### 현재 상황
- 크롤러는 **목록 페이지**에서만 데이터를 추출
- 목록 페이지에는 접수 시작일 정보가 없을 가능성이 높음
- 공고 상세 페이지(`detail_url`)를 방문하지 않음

### 접수 시작일을 얻기 위한 방법

#### 방법 1: 공고 상세 페이지 크롤링 (권장)
- 공고 상세 페이지에서 접수 시작일 추출
- 단점: 크롤링 시간 증가, 서버 부하 증가

#### 방법 2: 목록 페이지에서 추가 정보 추출
- 목록 페이지의 다른 컬럼 확인
- 접수 시작일 정보가 있는지 확인 필요

#### 방법 3: PDF 파일에서 추출
- 공고 PDF 파일에서 접수 시작일 추출
- 단점: PDF 파싱 필요, 시간 소요

## 3. 모델 필드 확인

### 현재 AnncAll 모델 필드
```python
annc_pblsh_dt = models.CharField(max_length=50, verbose_name="게시일")
annc_deadline_dt = models.CharField(max_length=50, verbose_name="마감일")
# 접수 시작일 필드 없음 ❌
```

### 접수 시작일 필드 추가 필요 여부
- **필요함**: 정확한 접수기간 표시 및 상태 판단을 위해 필요
- **현재**: 접수 시작일 정보가 없어서 `annc_pblsh_dt`를 접수 시작일로 가정해야 함

## 4. 임시 해결책

### 프론트엔드에서 동적 상태 계산

**로직**:
1. `annc_pblsh_dt`를 접수 시작일로 가정 (임시)
2. 현재 날짜가 `annc_pblsh_dt`와 `annc_deadline_dt` 사이에 있으면 "접수중"
3. `annc_deadline_dt`가 지났으면 "마감"
4. `annc_pblsh_dt`가 미래면 "공고예정"

**주의사항**:
- `annc_pblsh_dt`가 실제 접수 시작일이 아닐 수 있음
- 공고2의 경우: 게시일 2025.05.28, 접수 시작일 2025.06.19
- 이 경우 약 3주간 "공고중"으로 표시되어야 하지만, 현재 로직으로는 "접수중"으로 표시됨

**개선 방안**:
- 접수 시작일 정보가 없으므로, `annc_status`가 "공고중"이고 날짜가 접수기간 내에 있으면 "접수중"으로 표시
- 단, 정확도는 낮을 수 있음

## 5. 권장 사항

### 단기 해결책 (즉시 적용)
1. 프론트엔드에서 `annc_pblsh_dt`를 접수 시작일로 가정하여 동적 상태 계산
2. 접수기간 내에 있으면 "접수중"으로 표시
3. 단, 정확도는 낮을 수 있음 (게시일과 접수 시작일이 다를 수 있음)

### 장기 해결책 (향후 개선)
1. 공고 상세 페이지 크롤링하여 접수 시작일 추출
2. 모델에 `annc_recruitment_start_dt` 필드 추가
3. 크롤러에서 접수 시작일 추출 및 저장
4. 프론트엔드에서 접수 시작일 사용

## 6. 다음 단계

1. ✅ 크롤러 코드 확인 완료
2. ✅ 접수 시작일 필드 없음 확인
3. ✅ 임시 해결책 적용 (프론트엔드 수정)
4. ⏳ 장기 해결책 계획 (접수 시작일 필드 추가)

