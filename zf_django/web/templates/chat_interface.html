<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>Chat Interface</title>
</head>

<body>
    <h1>Chatbot API Test</h1>
    <button onclick="fetchApiData()">API 호출</button>

    <p>API 응답: <span id="api-response-text">데이터를 불러오는 중...</span></p>

    <script>
        function fetchApiData() {
            // chatbot 앱의 API 엔드포인트 URL
            const apiUrl = '{% url "test_api" %}';

            // fetch API를 사용하여 비동기로 호출
            fetch(apiUrl)
                .then(response => {
                    // 응답이 성공적인지 확인 (HTTP 상태 코드 200번대)
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    // 응답 본문을 JSON으로 파싱
                    return response.json();
                })
                .then(data => {
                    // JSON 데이터 처리 및 페이지에 노출
                    const responseTextElement = document.getElementById('api-response-text');
                    if (data.message) {
                        responseTextElement.textContent = data.message;
                    } else {
                        responseTextElement.textContent = '알 수 없는 응답 형식';
                    }
                })
                .catch(error => {
                    // 오류 발생 시 콘솔에 기록하고 사용자에게 오류 메시지 표시
                    console.error('API 호출 중 오류 발생:', error);
                    document.getElementById('api-response-text').textContent = 'API 호출 실패: ' + error.message;
                });
        }

        // 페이지 로드 시 자동으로 호출하려면 주석을 해제하세요.
        // window.onload = fetchApiData; 
    </script>
</body>

</html>
</body>

</html>