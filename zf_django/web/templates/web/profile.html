{% extends "base.html" %}
{% block title %}맞춤 정보 입력 | ZIPFIT{% endblock %}

{% block content %}

<!-- 전체 모달 배경 -->
<div class="fixed inset-0 bg-black/40 flex items-center justify-center z-40">
    <div class="bg-white rounded-3xl w-[900px] max-h-[85vh] overflow-y-auto shadow-soft p-8">

        <!-- 헤더 -->
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-bold">맞춤 정보 입력</h2>
            <a href="/" class="text-gray-400 hover:text-gray-700 text-xl">&times;</a>
        </div>

        <form method="POST" class="space-y-5">
            {% csrf_token %}

            <!-- ✔ 희망 지역 -->
            <div class="grid grid-cols-[140px_1fr] gap-4 py-3 border-b">
                <label class="font-semibold text-sm">희망 지역</label>
                <input name="region"
                       value="{{ user_context.region|default:'' }}"
                       placeholder="예: 서울, 경기"
                       class="w-full border rounded-lg px-3 py-2 text-sm">
            </div>

            <!-- ✔ 연령 -->
            <div class="grid grid-cols-[140px_1fr] gap-4 py-3 border-b">
                <label class="font-semibold text-sm">연령</label>
                <div class="flex items-center gap-2">
                    <input name="age"
                           value="{{ user_context.age|default:'' }}"
                           placeholder="만 나이"
                           class="w-32 border rounded-lg px-3 py-2 text-sm">
                    <span class="text-sm text-gray-500">세</span>
                </div>
            </div>

            <!-- ✔ 결혼 여부 -->
            <div class="grid grid-cols-[140px_1fr] gap-4 py-3 border-b">
                <label class="font-semibold text-sm">결혼 여부</label>
                <div class="flex gap-6 text-sm">

                    <!-- 미혼 -->
                    <label class="flex items-center gap-1">
                        <input type="radio" name="married" value="no"
                               {% if user_context.married == 'no' or not user_context.married %}checked{% endif %}>
                        아니오
                    </label>

                    <!-- 기혼 -->
                    <label class="flex items-center gap-1">
                        <input type="radio" name="married" value="yes"
                               {% if user_context.married == 'yes' %}checked{% endif %}>
                        예
                    </label>

                </div>
            </div>

            <!-- ✔ 자녀 -->
            <div class="grid grid-cols-[140px_1fr] gap-4 py-3 border-b">
                <label class="font-semibold text-sm">자녀</label>
                <div class="flex flex-wrap gap-4 text-sm">

                    {% for num in children_options %}
                    <label class="flex items-center gap-1">
                        <input type="radio" name="children" value="{{ num }}"
                               {% if user_context.children == num %}checked{% endif %}>
                        {{ num }}명
                    </label>
                    {% endfor %}

                    <!-- 없음 -->
                    <label class="flex items-center gap-1">
                        <input type="radio" name="children" value="0"
                               {% if user_context.children == '0' or not user_context.children %}checked{% endif %}>
                        없음
                    </label>

                </div>
            </div>

            <!-- ✔ 소득 -->
            <div class="grid grid-cols-[140px_1fr] gap-4 py-3 border-b">
                <label class="font-semibold text-sm">연봉 정보 (세전)</label>
                <div class="flex items-center gap-2">
                    <input name="income"
                           value="{{ user_context.income|default:'' }}"
                           placeholder="예: 4500"
                           class="w-40 border rounded-lg px-3 py-2 text-sm">
                    <span class="text-sm text-gray-500">만원</span>
                </div>
            </div>

            <!-- 버튼 -->
            <div class="flex justify-end gap-3 mt-6">
                <a href="/" class="px-4 py-2 rounded-lg border text-sm">취소</a>
                <button class="px-5 py-2 rounded-lg bg-zip-primary text-white text-sm font-semibold hover:bg-zip-primary3 transition">
                    저장
                </button>
            </div>

            {% if saved %}
            <p class="text-right text-xs text-green-600 mt-1">
                ✔ 맞춤 정보가 저장되었습니다.
            </p>
            {% endif %}
        </form>

    </div>
</div>

{% endblock %}
